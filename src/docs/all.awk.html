<!DOCTYPE html>

<html>
<head>
  <title>all.awk.md</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>all.awk.md</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              <p>#!/usr/bin/env [“/gold”]</p>
<h1 id="vim-filetypeawk-">vim: filetype=awk :</h1>
<p>asdasdasdasda
asdasdasadsasdasd
asdassaads</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
BEGIN {
  DOT=<span class="hljs-built_in">sprintf</span>(<span class="hljs-string">&quot;%c&quot;</span>,<span class="hljs-number">46</span>)
  Obj(i)
  rowsRead(i,DOT DOT <span class="hljs-string">&quot;/keys/data/weather&quot;</span>DOT<span class="hljs-string">&quot;csv&quot;</span>)
  oo(i) 
}</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <h1 id="asdasd">asdasd</h1>
<ul>
<li>asdasadasd
asdadasdasdasdas
aasdadasdsa
asdasasdadsdasasddasd</li>
</ul>
<hr>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>function <span class="hljs-title function_">Rows</span><span class="hljs-params">(i,a,   name,c,what)</span> {
  Obj(i)
  i[<span class="hljs-string">&quot;is&quot;</span>]=<span class="hljs-string">&quot;rows&quot;</span>
  has(i,<span class="hljs-string">&quot;row&quot;</span>)
  has(i,<span class="hljs-string">&quot;col&quot;</span>)
  has(i,<span class="hljs-string">&quot;name&quot;</span>)
  <span class="hljs-keyword">for</span>(c in a) {
    has(i[<span class="hljs-string">&quot;col&quot;</span>], c)
    name = i[<span class="hljs-string">&quot;name&quot;</span>][c]= a[c]
    what = name ~ /^[A-Z]/ ? <span class="hljs-string">&quot;Num&quot;</span> : <span class="hljs-string">&quot;Sym&quot;</span>
    <span class="hljs-keyword">if</span> (name ~ /?/) what=<span class="hljs-string">&quot;Skip&quot;</span>
    @what(i[<span class="hljs-string">&quot;col&quot;</span>][c], c, name)
    <span class="hljs-keyword">if</span> (name !~ /\?/) {
      name~ /[!-\+]/ ? i[<span class="hljs-string">&quot;y&quot;</span>][c]=  <span class="hljs-number">1</span> : i[<span class="hljs-string">&quot;x&quot;</span>][c] = <span class="hljs-number">1</span>
      <span class="hljs-keyword">if</span> (name~ /-/)   i[<span class="hljs-string">&quot;y&quot;</span>][c]= <span class="hljs-number">-1</span> }}}

function rows(i, a) {
  length(i) ? _rows(i,a) : Rows(i,a) } 

function _rows(i,a,    c,x,r) {
  r = <span class="hljs-number">1</span> + length( tab[<span class="hljs-string">&quot;row&quot;</span>]  )
  <span class="hljs-keyword">for</span>(c in a) 
    i[<span class="hljs-string">&quot;row&quot;</span>][r][c] = colAdd(i[<span class="hljs-string">&quot;col&quot;</span>][c], a[x])}

function rowsRead(i,file,   a) {
  file = file ? file : <span class="hljs-string">&quot;-&quot;</span>
  <span class="hljs-keyword">while</span> ((getline &lt; file)&gt; <span class="hljs-number">0</span>) { split($<span class="hljs-number">0</span>,a,<span class="hljs-string">&quot;,&quot;</span>); rows(i,a) }
  close(file) }</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <p>function _data1(col,x) {
function tabDist(tab,row1,row2,the) {
  d=n=1E-31
  for (c in tab[the[“cols”]]) 
     x=row1[c]; y =row1[c]
     d=d+ (x==y==”?”) ? 1 : (nump(tab[“cols”][c]) ? numDist(
     else {
       d rowtab[“cols”]
x
}</p>
<hr>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>function <span class="hljs-title function_">add</span><span class="hljs-params">(i,x,f)</span> {f=i[<span class="hljs-string">&quot;is&quot;</span>]<span class="hljs-string">&quot;Add&quot;</span>; <span class="hljs-keyword">return</span> @f(i,x) }</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>function <span class="hljs-title function_">Col</span><span class="hljs-params">(i,at, name)</span> {
  Obj(i)
  i[<span class="hljs-string">&quot;is&quot;</span>]=<span class="hljs-string">&quot;col&quot;</span>
  i[<span class="hljs-string">&quot;n&quot;</span>] = <span class="hljs-number">0</span>
  i[<span class="hljs-string">&quot;at&quot;</span>] = at
  i[<span class="hljs-string">&quot;name&quot;</span>] = name
  <span class="hljs-keyword">if</span> (name ~ /?/) i[<span class="hljs-string">&quot;skip&quot;</span>]=<span class="hljs-number">1</span> }

function colAdd(i, x) {
  <span class="hljs-keyword">if</span> (x != <span class="hljs-string">&quot;?&quot;</span>) {
      i[<span class="hljs-string">&quot;n&quot;</span>]++
      x = add(i,x) }
  <span class="hljs-keyword">return</span> x }</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>function <span class="hljs-title function_">Skip</span><span class="hljs-params">(i,at,name)</span> { Col(i,at,name); i[<span class="hljs-string">&quot;is&quot;</span>]=<span class="hljs-string">&quot;skip&quot;</span> }

function skipAdd(i,x) { <span class="hljs-keyword">return</span> x }</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-10">&#x00a7;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-11">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>function <span class="hljs-title function_">Num</span><span class="hljs-params">(i,at,name)</span> {
  Col(i,at,name)
  i[<span class="hljs-string">&quot;is&quot;</span>]=<span class="hljs-string">&quot;num&quot;</span>
  i[<span class="hljs-string">&quot;lo&quot;</span>] =  <span class="hljs-number">1E32</span> 
  i[<span class="hljs-string">&quot;hi&quot;</span>] = <span class="hljs-number">-1E32</span> 
  i[<span class="hljs-string">&quot;mu&quot;</span>] =  i[<span class="hljs-string">&quot;m2&quot;</span>] = i[<span class="hljs-string">&quot;sd&quot;</span>] = <span class="hljs-number">0</span> }

function numAdd(i,x,     d) {
  <span class="hljs-keyword">if</span>(x&lt; i[<span class="hljs-string">&quot;lo&quot;</span>]) i[<span class="hljs-string">&quot;lo&quot;</span>] = x
  <span class="hljs-keyword">if</span>(x&gt; i[<span class="hljs-string">&quot;hi&quot;</span>]) i[<span class="hljs-string">&quot;hi&quot;</span>] = x
  d     = x - i[<span class="hljs-string">&quot;mu&quot;</span>]
  i[<span class="hljs-string">&quot;mu&quot;</span>] += d/i[<span class="hljs-string">&quot;n&quot;</span>]
  i[<span class="hljs-string">&quot;m2&quot;</span>] += d*(x-i[<span class="hljs-string">&quot;mu&quot;</span>])
  i[<span class="hljs-string">&quot;sd&quot;</span>]  = (i[<span class="hljs-string">&quot;m2&quot;</span>] &lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">0</span> : ( \
          (i[<span class="hljs-string">&quot;n&quot;</span>]  &lt; <span class="hljs-number">2</span>) ? <span class="hljs-number">0</span> : (  \
           i[<span class="hljs-string">&quot;m2&quot;</span>]/(i[<span class="hljs-string">&quot;n&quot;</span>]<span class="hljs-number">-1</span>))^<span class="hljs-number">0.5</span>) }

function norm(i,x) {
   <span class="hljs-keyword">return</span> (x-i[<span class="hljs-string">&quot;lo&quot;</span>])/(i[<span class="hljs-string">&quot;hi&quot;</span>] - i[<span class="hljs-string">&quot;lo&quot;</span>] +<span class="hljs-number">1E-31</span>) }</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-12">&#x00a7;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-13">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>function <span class="hljs-title function_">Sym</span><span class="hljs-params">(i,at,name)</span> {
  Col(i,at,name)
  has(i,<span class="hljs-string">&quot;seen&quot;</span>)
  i[<span class="hljs-string">&quot;mode&quot;</span>] = <span class="hljs-string">&quot;&quot;</span>
  i[<span class="hljs-string">&quot;most&quot;</span>] = <span class="hljs-number">0</span> }

function symAdd(col,x,     old,new) {
  old = x in col[<span class="hljs-string">&quot;seen&quot;</span>] ? col[<span class="hljs-string">&quot;seen&quot;</span>][x] : <span class="hljs-number">0</span>
  new = col[<span class="hljs-string">&quot;seen&quot;</span>][x] = <span class="hljs-number">1</span> + old
  <span class="hljs-keyword">if</span> (new  &gt; col[<span class="hljs-string">&quot;most&quot;</span>]) {
    col[<span class="hljs-string">&quot;most&quot;</span>]  = new
    col[<span class="hljs-string">&quot;mode&quot;</span>] = x }}</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-14">&#x00a7;</a>
              </div>
              <hr>

            </div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-15">&#x00a7;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre>function <span class="hljs-title function_">has</span><span class="hljs-params">(a,i)</span> { a[i][<span class="hljs-number">0</span>]; delete a[i][<span class="hljs-number">0</span>] }
function <span class="hljs-title function_">Obj</span><span class="hljs-params">(a)</span>   { split(<span class="hljs-string">&quot;&quot;</span>,a,<span class="hljs-string">&quot;&quot;</span>) }

function <span class="hljs-title function_">oo</span><span class="hljs-params">(x,p,pre, i,txt)</span> {
  txt = pre ? pre : (p DOT)
  _ooOrder(x)
  <span class="hljs-keyword">for</span>(i in x)  {
    <span class="hljs-keyword">if</span> (isarray(x[i]))   {
      print(txt i<span class="hljs-string">&quot;&quot;</span> )
      oo(x[i],<span class="hljs-string">&quot;&quot;</span>,<span class="hljs-string">&quot;|  &quot;</span> pre)
    } <span class="hljs-keyword">else</span>
      print(txt i (x[i]==<span class="hljs-string">&quot;&quot;</span>?<span class="hljs-string">&quot;&quot;</span>: <span class="hljs-string">&quot;: &quot;</span> x[i])) }
}
function _ooOrder(x,   i) {
  <span class="hljs-keyword">for</span> (i in x)
    <span class="hljs-keyword">return</span> PROCINFO[<span class="hljs-string">&quot;sorted_in&quot;</span>] =\
      typeof(i+<span class="hljs-number">1</span>)==<span class="hljs-string">&quot;number&quot;</span> ? <span class="hljs-string">&quot;@ind_num_asc&quot;</span> : <span class="hljs-string">&quot;@ind_str_asc&quot;</span>
}</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
